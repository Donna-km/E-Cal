<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TDEE Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brown': {
                            50: '#fdf8f6',
                            100: '#f2e8e5',
                            200: '#eaddd7',
                            300: '#e0cfc5',
                            400: '#d2bab0',
                            500: '#bfa094',
                            600: '#a18072',
                            700: '#977669',
                            800: '#846358',
                            900: '#43302b',
                        }
                    }
                }
            }
        }
    </script>
  <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-out {
            animation: fadeOut 0.3s ease-out;
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-20px); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-screen font-sans" style="background-color: #cc1e0f;">
  <div class="container mx-auto px-4 py-8 max-w-2xl"><!-- Header -->
   <div class="text-center mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">TDEE Calculator</h1>
    <p class="text-white opacity-90">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
   </div><!-- Progress Bar -->
   <div class="mb-8">
    <div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-white" id="progress-text">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</span> <span class="text-sm font-medium text-white" id="progress-count">1/7</span>
    </div>
    <div class="w-full bg-white bg-opacity-30 rounded-full h-2">
     <div class="bg-white h-2 rounded-full transition-all duration-300" id="progress-bar" style="width: 14.3%"></div>
    </div>
   </div><!-- Page 1: Basic Information -->
   <div id="page1" class="fade-in">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h2>
     </div>
     <div class="space-y-6"><!-- Name Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label> <input type="text" id="full-name" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
      </div><!-- Gender Selection -->
      <div><label class="block text-sm font-medium text-brown-700 mb-3">‡πÄ‡∏û‡∏®</label>
       <div class="grid grid-cols-2 gap-4"><button type="button" class="gender-btn flex items-center justify-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-gender="male" onclick="selectGender('male')"> <span class="font-medium text-brown-700">‡∏ä‡∏≤‡∏¢</span> </button> <button type="button" class="gender-btn flex items-center justify-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-gender="female" onclick="selectGender('female')"> <span class="font-medium text-brown-700">‡∏´‡∏ç‡∏¥‡∏á</span> </button>
       </div>
      </div><!-- Age Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ)</label> <input type="number" id="age" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" min="1" max="120">
      </div><!-- Height Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label> <input type="number" id="height" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" min="100" max="250">
      </div><!-- Weight Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏Å‡∏Å.)</label> <input type="number" id="weight" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" min="30" max="300" step="0.1">
      </div><!-- Target Weight Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏Å‡∏Å.)</label> <input type="number" id="target-weight" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£" min="30" max="300" step="0.1">
      </div><!-- Timeline Input -->
      <div><label class="block text-sm font-medium text-brown-700 mb-2">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</label> <input type="number" id="timeline" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£" min="1" max="24">
      </div>
     </div>
     <div class="mt-8"><button type="button" class="w-full bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(1)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 2: Activity Level -->
   <div id="page2" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
     </div>
     <div class="space-y-4"><button type="button" class="activity-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-activity="1.2" onclick="selectActivity(1.2, this)">
       <div class="font-medium text-brown-800">
        ‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏•‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å
       </div></button> <button type="button" class="activity-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-activity="1.375" onclick="selectActivity(1.375, this)">
       <div class="font-medium text-brown-800">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏ö‡∏≤‡πÜ
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ 1-3 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
       </div></button> <button type="button" class="activity-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-activity="1.55" onclick="selectActivity(1.55, this)">
       <div class="font-medium text-brown-800">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ 3-5 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
       </div></button> <button type="button" class="activity-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-activity="1.725" onclick="selectActivity(1.725, this)">
       <div class="font-medium text-brown-800">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ 6-7 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
       </div></button> <button type="button" class="activity-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-activity="1.9" onclick="selectActivity(1.9, this)">
       <div class="font-medium text-brown-800">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô
       </div></button>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(2)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(2)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 3: Goal -->
   <div id="page3" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h2>
     </div>
     <div class="space-y-4"><button type="button" class="goal-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-goal="lose" onclick="selectGoal('lose', this)">
       <div class="font-medium text-brown-800">
        ‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏•‡∏î‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 500 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô (‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 0.5 ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)
       </div></button> <button type="button" class="goal-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-goal="maintain" onclick="selectGoal('maintain', this)">
       <div class="font-medium text-brown-800">
        ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
       </div></button> <button type="button" class="goal-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-goal="gain" onclick="selectGoal('gain', this)">
       <div class="font-medium text-brown-800">
        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 500 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 0.5 ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)
       </div></button> <button type="button" class="goal-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-goal="muscle" onclick="selectGoal('muscle', this)">
       <div class="font-medium text-brown-800">
        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠
       </div>
       <div class="text-sm text-brown-600 mt-1">
        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 300-400 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡∏™‡∏π‡∏á
       </div></button>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(3)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(3)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 4: Food Allergies -->
   <div id="page4" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
     </div>
     <div class="mb-6">
      <p class="text-sm text-brown-600 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏û‡πâ (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</p>
      <div class="grid grid-cols-2 gap-3"><label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="milk" onchange="toggleAllergy('milk')"> <span class="text-brown-700">‡∏ô‡∏°/‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ô‡∏°</span> </label> <label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="eggs" onchange="toggleAllergy('eggs')"> <span class="text-brown-700">‡πÑ‡∏Ç‡πà</span> </label> <label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="nuts" onchange="toggleAllergy('nuts')"> <span class="text-brown-700">‡∏ñ‡∏±‡πà‡∏ß/‡πÄ‡∏°‡∏•‡πá‡∏î‡πÅ‡∏Ç‡πá‡∏á</span> </label> <label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="seafood" onchange="toggleAllergy('seafood')"> <span class="text-brown-700">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•</span> </label> <label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="gluten" onchange="toggleAllergy('gluten')"> <span class="text-brown-700">‡∏Å‡∏•‡∏π‡πÄ‡∏ï‡∏ô</span> </label> <label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="soy" onchange="toggleAllergy('soy')"> <span class="text-brown-700">‡∏ñ‡∏±‡πà‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á</span> </label>
      </div>
      <div class="mt-4"><label class="flex items-center p-3 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="allergy-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="none" onchange="toggleAllergy('none')"> <span class="text-brown-700">‡πÑ‡∏°‡πà‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏î‡πÜ</span> </label>
      </div><!-- Other Allergies Input -->
      <div class="mt-4"><label class="block text-sm font-medium text-brown-700 mb-2">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)</label> <textarea id="other-allergies" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors resize-none" rows="3" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏û‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"></textarea>
      </div>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(4)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(4)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 5: Medical Conditions -->
   <div id="page5" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</h2>
     </div>
     <div class="mb-6">
      <p class="text-sm text-brown-600 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</p>
      <div class="space-y-3"><label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="diabetes" onchange="toggleCondition('diabetes')">
        <div>
         <div class="font-medium text-brown-800">
          ‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô
         </div>
         <div class="text-sm text-brown-600">
          ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÉ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="hypertension" onchange="toggleCondition('hypertension')">
        <div>
         <div class="font-medium text-brown-800">
          ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÇ‡∏•‡∏´‡∏¥‡∏ï‡∏™‡∏π‡∏á
         </div>
         <div class="text-sm text-brown-600">
          ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="heart" onchange="toggleCondition('heart')">
        <div>
         <div class="font-medium text-brown-800">
          ‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à
         </div>
         <div class="text-sm text-brown-600">
          ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="kidney" onchange="toggleCondition('kidney')">
        <div>
         <div class="font-medium text-brown-800">
          ‡πÇ‡∏£‡∏Ñ‡πÑ‡∏ï
         </div>
         <div class="text-sm text-brown-600">
          ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏ã‡πÄ‡∏î‡∏µ‡∏¢‡∏°
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="thyroid" onchange="toggleCondition('thyroid')">
        <div>
         <div class="font-medium text-brown-800">
          ‡πÇ‡∏£‡∏Ñ‡πÑ‡∏ó‡∏£‡∏≠‡∏¢‡∏î‡πå
         </div>
         <div class="text-sm text-brown-600">
          ‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="condition-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="none" onchange="toggleCondition('none')">
        <div>
         <div class="font-medium text-brown-800">
          ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß
         </div>
         <div class="text-sm text-brown-600">
          ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏î‡∏µ
         </div>
        </div></label>
      </div><!-- Other Conditions Input -->
      <div class="mt-4"><label class="block text-sm font-medium text-brown-700 mb-2">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)</label> <textarea id="other-conditions" class="w-full px-4 py-3 border-2 border-brown-200 rounded-xl focus:border-brown-400 focus:outline-none transition-colors resize-none" rows="3" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"></textarea>
      </div>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(5)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(5)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 6: Diet Preference -->
   <div id="page6" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
     </div>
     <div class="mb-6">
      <p class="text-lg text-brown-700 mb-2 font-medium">‡πÄ‡∏ò‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡∏¢‡∏Å‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ô‡πâ‡∏≤‡∏≤ üòãüíï</p>
      <p class="text-sm text-brown-600 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
      <div class="grid grid-cols-1 gap-3"><label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="rice_curry" onchange="toggleDiet('rice_curry')">
        <div class="flex items-center"><span class="text-2xl mr-3">üçõ</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏Å‡∏á / ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á
          </div>
          <div class="text-sm text-brown-600">
           ‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î ‡πÅ‡∏Å‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢ ‡∏™‡πâ‡∏°‡∏ï‡∏≥
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="clean_eating" onchange="toggleDiet('clean_eating')">
        <div class="flex items-center"><span class="text-2xl mr-3">ü•ó</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏Ñ‡∏•‡∏µ‡∏ô
          </div>
          <div class="text-sm text-brown-600">
           ‡∏™‡∏•‡∏±‡∏î ‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∏‡∏á‡πÅ‡∏ï‡πà‡∏á
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="sweet_dessert" onchange="toggleDiet('sweet_dessert')">
        <div class="flex items-center"><span class="text-2xl mr-3">üßÅ</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏´‡∏ß‡∏≤‡∏ô ‡∏ä‡∏≤‡∏ô‡∏° ‡πÄ‡∏Ñ‡πâ‡∏Å
          </div>
          <div class="text-sm text-brown-600">
           ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô ‡πÄ‡∏Ñ‡πâ‡∏Å ‡∏ä‡∏≤‡∏ô‡∏° ‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="grilled_hotpot" onchange="toggleDiet('grilled_hotpot')">
        <div class="flex items-center"><span class="text-2xl mr-3">üçñ</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏õ‡∏¥‡πâ‡∏á‡∏¢‡πà‡∏≤‡∏á ‡∏ä‡∏≤‡∏ö‡∏π
          </div>
          <div class="text-sm text-brown-600">
           ‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á ‡∏ä‡∏≤‡∏ö‡∏π ‡∏ö‡∏≤‡∏£‡πå‡∏ö‡∏µ‡∏Ñ‡∏¥‡∏ß ‡∏´‡∏°‡∏π‡∏Å‡∏∞‡∏ó‡∏∞
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="coffee_lover" onchange="toggleDiet('coffee_lover')">
        <div class="flex items-center"><span class="text-2xl mr-3">‚òï</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏Å‡∏≤‡πÅ‡∏ü
          </div>
          <div class="text-sm text-brown-600">
           ‡∏Å‡∏≤‡πÅ‡∏ü ‡πÄ‡∏≠‡∏™‡πÄ‡∏õ‡∏£‡∏™‡πÇ‡∏ã‡πà ‡∏•‡∏≤‡πÄ‡∏ï‡πâ ‡∏Ñ‡∏≤‡∏õ‡∏π‡∏ä‡∏¥‡πÇ‡∏ô‡πà
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="snack_lover" onchange="toggleDiet('snack_lover')">
        <div class="flex items-center"><span class="text-2xl mr-3">üçø</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢ Snack ‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏à‡∏∏‡∏Å‡∏à‡∏¥‡∏Å
          </div>
          <div class="text-sm text-brown-600">
           ‡∏Ç‡∏ô‡∏° ‡∏ñ‡∏±‡πà‡∏ß ‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÅ‡∏´‡πâ‡∏á ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="high_carb" onchange="toggleDiet('high_carb')">
        <div class="flex items-center"><span class="text-2xl mr-3">üçù</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞
          </div>
          <div class="text-sm text-brown-600">
           ‡∏Ç‡πâ‡∏≤‡∏ß ‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á ‡∏û‡∏≤‡∏™‡∏ï‡πâ‡∏≤ ‡∏ö‡∏∞‡∏´‡∏°‡∏µ‡πà
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="diet-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="high_protein" onchange="toggleDiet('high_protein')">
        <div class="flex items-center"><span class="text-2xl mr-3">ü•©</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏™‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ ‡πÑ‡∏Å‡πà ‡∏õ‡∏•‡∏≤ ‡πÑ‡∏Ç‡πà ‡∏ñ‡∏±‡πà‡∏ß
          </div>
         </div>
        </div></label>
      </div>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(6)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(6)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 7: Time Availability -->
   <div id="page7" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">Time Availability</h2>
     </div>
     <div class="mb-6">
      <p class="text-lg text-brown-700 mb-2 font-medium">‡∏ß‡∏±‡∏ô‡∏ô‡∏∂‡∏á‡πÄ‡∏ò‡∏≠‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏µ‡πà‡∏ô‡∏≤‡∏ó‡∏µ? üíï</p>
      <p class="text-sm text-brown-600 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÑ‡∏•‡∏ü‡πå‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
      <div class="space-y-3"><button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="0-10" onclick="selectTime('0-10', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">‚è∞</span>
         <div>
          <div class="font-medium text-brown-800">
           0‚Äì10 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏¢‡∏∏‡πà‡∏á‡∏°‡∏≤‡∏Å)
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏î‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏î‡πÄ‡∏ö‡∏≤‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏±‡πâ‡∏ô‡πÜ
          </div>
         </div>
        </div></button> <button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="10-20" onclick="selectTime('10-20', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">‚è±Ô∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           10‚Äì20 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏û‡∏≠‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤)
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö HIIT ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏¢‡∏Ñ‡∏∞‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
          </div>
         </div>
        </div></button> <button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="20-30" onclick="selectTime('20-30', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">üïê</span>
         <div>
          <div class="font-medium text-brown-800">
           20‚Äì30 ‡∏ô‡∏≤‡∏ó‡∏µ
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö
          </div>
         </div>
        </div></button> <button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="30-45" onclick="selectTime('30-45', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">üïï</span>
         <div>
          <div class="font-medium text-brown-800">
           30‚Äì45 ‡∏ô‡∏≤‡∏ó‡∏µ
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô
          </div>
         </div>
        </div></button> <button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="45-60" onclick="selectTime('45-60', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">üïò</span>
         <div>
          <div class="font-medium text-brown-800">
           45‚Äì60 ‡∏ô‡∏≤‡∏ó‡∏µ
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
          </div>
         </div>
        </div></button> <button type="button" class="time-btn w-full text-left p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200" data-time="60+" onclick="selectTime('60+', this)">
        <div class="flex items-center"><span class="text-2xl mr-3">üî•</span>
         <div>
          <div class="font-medium text-brown-800">
           60+ ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏™‡∏≤‡∏¢‡∏ü‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á üî•)
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
          </div>
         </div>
        </div></button>
      </div>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(7)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="nextPage(7)"> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ </button>
     </div>
    </div>
   </div><!-- Page 8: Workout Preference -->
   <div id="page8" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="flex items-center mb-6">
      <div class="w-8 h-8 bg-brown-600 rounded-full flex items-center justify-center mr-3">
       <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
       </svg>
      </div>
      <h2 class="text-xl font-semibold text-brown-900">‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</h2>
     </div>
     <div class="mb-6">
      <p class="text-lg text-brown-700 mb-2 font-medium">‡πÄ‡∏ò‡∏≠‡∏ä‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏ô‡∏ß‡πÑ‡∏´‡∏ô üí™üî•</p>
      <p class="text-sm text-brown-600 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
      <div class="space-y-3"><label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="cardio_dance" onchange="toggleWorkout('cardio_dance')">
        <div class="flex items-center"><span class="text-2xl mr-3">üíÉ</span>
         <div>
          <div class="font-medium text-brown-800">
           Cardio / ‡πÄ‡∏ï‡πâ‡∏ô
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡πÇ‡∏£‡∏ö‡∏¥‡∏Ñ ‡∏ã‡∏∏‡∏°‡∏ö‡πâ‡∏≤ ‡πÄ‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏û‡∏•‡∏á
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="yoga_pilates" onchange="toggleWorkout('yoga_pilates')">
        <div class="flex items-center"><span class="text-2xl mr-3">üßò‚Äç‚ôÄÔ∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡πÇ‡∏¢‡∏Ñ‡∏∞ / Pilates / ‡∏¢‡∏∑‡∏î‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏î
          </div>
          <div class="text-sm text-brown-600">
           ‡πÇ‡∏¢‡∏Ñ‡∏∞ ‡∏û‡∏¥‡∏•‡∏≤‡∏ó‡∏¥‡∏™ ‡∏¢‡∏∑‡∏î‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="walking_running" onchange="toggleWorkout('walking_running')">
        <div class="flex items-center"><span class="text-2xl mr-3">üèÉ‚Äç‚ôÄÔ∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß / ‡∏ß‡∏¥‡πà‡∏á
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡∏à‡πä‡∏≠‡∏Å‡∏Å‡∏¥‡πâ‡∏á ‡∏ß‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏£‡∏≤‡∏ò‡∏≠‡∏ô
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="hiit" onchange="toggleWorkout('hiit')">
        <div class="flex items-center"><span class="text-2xl mr-3">‚ö°</span>
         <div>
          <div class="font-medium text-brown-800">
           HIIT
          </div>
          <div class="text-sm text-brown-600">
           High Intensity Interval Training
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="weight_training" onchange="toggleWorkout('weight_training')">
        <div class="flex items-center"><span class="text-2xl mr-3">üèãÔ∏è‚Äç‚ôÄÔ∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           Weight training
          </div>
          <div class="text-sm text-brown-600">
           ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="trekking" onchange="toggleWorkout('trekking')">
        <div class="flex items-center"><span class="text-2xl mr-3">ü•æ</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡πÄ‡∏î‡∏¥‡∏ô‡∏õ‡πà‡∏≤ (Trekking)
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏î‡∏¥‡∏ô‡∏õ‡πà‡∏≤ ‡∏õ‡∏µ‡∏ô‡πÄ‡∏Ç‡∏≤ ‡πÄ‡∏î‡∏¥‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="cycling" onchange="toggleWorkout('cycling')">
        <div class="flex items-center"><span class="text-2xl mr-3">üö¥‚Äç‚ôÄÔ∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô
          </div>
          <div class="text-sm text-brown-600">
           ‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô ‡∏õ‡∏±‡πà‡∏ô‡πÉ‡∏ô‡∏£‡πà‡∏° ‡∏õ‡∏±‡πà‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏à‡πâ‡∏á
          </div>
         </div>
        </div></label> <label class="flex items-center p-4 border-2 border-brown-200 rounded-xl hover:border-brown-400 hover:bg-brown-50 transition-all duration-200 cursor-pointer"> <input type="checkbox" class="workout-checkbox mr-3 text-brown-600 focus:ring-brown-500" value="light_exercise" onchange="toggleWorkout('light_exercise')">
        <div class="flex items-center"><span class="text-2xl mr-3">üö∂‚Äç‚ôÄÔ∏è</span>
         <div>
          <div class="font-medium text-brown-800">
           ‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏ä‡∏≠‡∏ö‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ö‡∏≤ ‡πÜ ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞
          </div>
          <div class="text-sm text-brown-600">
           ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ö‡∏≤ ‡πÜ ‡∏¢‡∏∑‡∏î‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÜ
          </div>
         </div>
        </div></label>
      </div>
     </div>
     <div class="mt-8 flex gap-4"><button type="button" class="flex-1 bg-brown-200 text-brown-700 py-3 px-6 rounded-xl font-medium hover:bg-brown-300 transition-colors duration-200" onclick="prevPage(8)"> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö </button> <button type="button" class="flex-1 bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="calculateTDEE()"> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì </button>
     </div>
    </div>
   </div><!-- Results Page -->
   <div id="results" class="hidden">
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6" style="border: 2px solid #e9e2d0;">
     <div class="text-center mb-8">
      <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
       <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h2 class="text-2xl font-bold text-brown-900 mb-2">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h2>
      <p class="text-brown-600">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
     </div>
     <div class="space-y-6"><!-- BMR -->
      <div class="bg-brown-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-brown-900">BMR (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏≤‡∏ú‡∏•‡∏≤‡∏ç‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)</h3>
         <p class="text-sm text-brown-600 mt-1">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡∏£‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-brown-900" id="bmr-result">
          -
         </div>
         <div class="text-sm text-brown-600">
          ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô
         </div>
        </div>
       </div>
      </div><!-- TDEE -->
      <div class="bg-blue-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-blue-900">TDEE (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏°)</h3>
         <p class="text-sm text-blue-600 mt-1">‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-blue-900" id="tdee-result">
          -
         </div>
         <div class="text-sm text-blue-600">
          ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô
         </div>
        </div>
       </div>
      </div><!-- Goal Calories -->
      <div class="bg-green-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-green-900" id="goal-title">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h3>
         <p class="text-sm text-green-600 mt-1" id="goal-description">-</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-green-900" id="goal-calories">
          -
         </div>
         <div class="text-sm text-green-600">
          ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô
         </div>
        </div>
       </div>
      </div><!-- BMI -->
      <div class="bg-purple-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-purple-900">BMI (‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏°‡∏ß‡∏•‡∏Å‡∏≤‡∏¢)</h3>
         <p class="text-sm text-purple-600 mt-1" id="bmi-status">-</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-purple-900" id="bmi-result">
          -
         </div>
         <div class="text-sm text-purple-600">
          kg/m¬≤
         </div>
        </div>
       </div>
      </div><!-- Weight Goal Info -->
      <div class="bg-orange-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-orange-900">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</h3>
         <p class="text-sm text-orange-600 mt-1" id="weight-goal-description">-</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-orange-900" id="target-weight-result">
          -
         </div>
         <div class="text-sm text-orange-600">
          ‡∏Å‡∏Å.
         </div>
        </div>
       </div>
      </div><!-- Timeline Info -->
      <div class="bg-teal-50 rounded-xl p-6">
       <div class="flex items-center justify-between">
        <div>
         <h3 class="font-semibold text-teal-900">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</h3>
         <p class="text-sm text-teal-600 mt-1" id="timeline-description">-</p>
        </div>
        <div class="text-right">
         <div class="text-2xl font-bold text-teal-900" id="timeline-result">
          -
         </div>
         <div class="text-sm text-teal-600">
          ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="mt-8"><button type="button" class="w-full bg-brown-600 text-white py-3 px-6 rounded-xl font-medium hover:bg-brown-700 transition-colors duration-200" onclick="resetCalculator()"> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà </button>
     </div>
    </div>
   </div>
  </div>
  <script>
        // Global variables
        let currentPage = 1;
        let userData = {
            fullName: '',
            gender: '',
            age: 0,
            height: 0,
            weight: 0,
            targetWeight: 0,
            timeline: 0,
            activity: 0,
            goal: '',
            allergies: [],
            conditions: [],
            dietPreferences: [],
            timeAvailability: '',
            workoutPreferences: [],
            otherAllergies: '',
            otherConditions: ''
        };

        // LIFF and Supabase configuration
        let lineUserId = null;
        let supabaseClient = null;
        let existingRecordId = null; // Track existing record for updates

        // Initialize LIFF
        async function initializeLIFF() {
            try {
                await liff.init({ liffId: "2007859046-AM0LQo0g" }); // Replace with your actual LIFF ID

                if (!liff.isLoggedIn()) {
                    liff.login();
                    return;
                }

                const profile = await liff.getProfile();
                lineUserId = profile.userId;
                console.log("LINE user ID:", lineUserId);
                
                // Auto-fill name field with LINE display name
                if (profile.displayName) {
                    const nameInput = document.getElementById('full-name');
                    nameInput.value = profile.displayName;
                    userData.fullName = profile.displayName;
                }

                // Check for existing data
                await checkForExistingData();
            } catch (error) {
                console.error("LIFF initialization failed:", error);
                // Continue without LINE integration
            }
        }

        // Check if user has existing data
        async function checkForExistingData() {
            if (!supabaseClient || !lineUserId) {
                return;
            }

            try {
                const { data, error } = await supabaseClient
                    .from('tdee_form')
                    .select('*')
                    .eq('line_user_id', lineUserId)
                    .order('created_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error("Error checking existing data:", error);
                    return;
                }

                if (data && data.length > 0) {
                    showExistingDataDialog(data[0]);
                }
            } catch (error) {
                console.error("Error checking existing data:", error);
            }
        }

        // Show dialog for existing data
        function showExistingDataDialog(existingData) {
            const userName = existingData.full_name || '‡∏Ñ‡∏∏‡∏ì';
            const lastUpdate = new Date(existingData.created_at).toLocaleDateString('th-TH');
            
            const confirmed = confirm(
                `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${userName}!\n\n` +
                `‡πÄ‡∏£‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• TDEE ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${lastUpdate}\n\n` +
                `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£:\n` +
                `‚úÖ ‡∏Å‡∏î "‡∏ï‡∏Å‡∏•‡∏á" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°\n` +
                `‚ùå ‡∏Å‡∏î "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà`
            );

            if (confirmed) {
                existingRecordId = existingData.id; // Store the record ID for updates
                loadExistingData(existingData);
            }
        }

        // Load existing data into form
        function loadExistingData(existingData) {
            console.log("Loading existing data:", existingData);
            
            // Load data into userData object
            userData.fullName = existingData.full_name || '';
            userData.gender = existingData.gender || '';
            userData.age = existingData.age || 0;
            userData.height = existingData.height || 0;
            userData.weight = existingData.weight || 0;
            userData.targetWeight = existingData.target_weight || 0;
            userData.timeline = existingData.timeline_months || 0;
            userData.allergies = Array.isArray(existingData.allergies) ? existingData.allergies : [];
            userData.conditions = Array.isArray(existingData.medical_conditions) ? existingData.medical_conditions : [];
            userData.dietPreferences = Array.isArray(existingData.diet_preferences) ? existingData.diet_preferences : [];
            userData.timeAvailability = existingData.time_availability || '';
            userData.workoutPreferences = Array.isArray(existingData.workout_preferences) ? existingData.workout_preferences : [];
            userData.otherAllergies = existingData.other_allergies || '';
            userData.otherConditions = existingData.other_conditions || '';

            // Wait for DOM to be ready, then fill form inputs
            setTimeout(() => {
                // Fill basic form inputs
                const fullNameInput = document.getElementById('full-name');
                const ageInput = document.getElementById('age');
                const heightInput = document.getElementById('height');
                const weightInput = document.getElementById('weight');
                const targetWeightInput = document.getElementById('target-weight');
                const timelineInput = document.getElementById('timeline');
                
                if (fullNameInput) fullNameInput.value = userData.fullName;
                if (ageInput) ageInput.value = userData.age || '';
                if (heightInput) heightInput.value = userData.height || '';
                if (weightInput) weightInput.value = userData.weight || '';
                if (targetWeightInput) targetWeightInput.value = userData.targetWeight || '';
                if (timelineInput) timelineInput.value = userData.timeline || '';

                // Set gender selection
                if (userData.gender) {
                    selectGender(userData.gender);
                }

                // Set activity level based on text
                const activityMap = {
                    '‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢': 1.2,
                    '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏ö‡∏≤‡πÜ': 1.375,
                    '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á': 1.55,
                    '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å': 1.725,
                    '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å': 1.9
                };
                if (existingData.activity_level && activityMap[existingData.activity_level]) {
                    userData.activity = activityMap[existingData.activity_level];
                }

                // Set goal based on text
                const goalMap = {
                    '‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å': 'lose',
                    '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å': 'maintain',
                    '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å': 'gain',
                    '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠': 'muscle'
                };
                if (existingData.goal && goalMap[existingData.goal]) {
                    userData.goal = goalMap[existingData.goal];
                }

                // Set allergies checkboxes
                if (userData.allergies && userData.allergies.length > 0) {
                    userData.allergies.forEach(allergy => {
                        const checkbox = document.querySelector(`.allergy-checkbox[value="${allergy}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    });
                }

                // Set conditions checkboxes
                if (userData.conditions && userData.conditions.length > 0) {
                    userData.conditions.forEach(condition => {
                        const checkbox = document.querySelector(`.condition-checkbox[value="${condition}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    });
                }

                // Set diet preferences checkboxes
                if (userData.dietPreferences && userData.dietPreferences.length > 0) {
                    userData.dietPreferences.forEach(diet => {
                        const checkbox = document.querySelector(`.diet-checkbox[value="${diet}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    });
                }

                // Set workout preferences checkboxes
                if (userData.workoutPreferences && userData.workoutPreferences.length > 0) {
                    userData.workoutPreferences.forEach(workout => {
                        const checkbox = document.querySelector(`.workout-checkbox[value="${workout}"]`);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    });
                }

                // Set other allergies and conditions text
                const otherAllergiesInput = document.getElementById('other-allergies');
                const otherConditionsInput = document.getElementById('other-conditions');
                
                if (otherAllergiesInput) otherAllergiesInput.value = userData.otherAllergies;
                if (otherConditionsInput) otherConditionsInput.value = userData.otherConditions;

                console.log("Form data loaded successfully");
            }, 200);

            // Set button selections with longer delay to ensure DOM is ready
            setTimeout(() => {
                // Highlight activity button
                if (userData.activity) {
                    const activityBtn = document.querySelector(`[data-activity="${userData.activity}"]`);
                    if (activityBtn) {
                        selectActivity(userData.activity, activityBtn);
                    }
                }

                // Highlight goal button
                if (userData.goal) {
                    const goalBtn = document.querySelector(`[data-goal="${userData.goal}"]`);
                    if (goalBtn) {
                        selectGoal(userData.goal, goalBtn);
                    }
                }

                // Highlight time availability button
                if (userData.timeAvailability) {
                    const timeBtn = document.querySelector(`[data-time="${userData.timeAvailability}"]`);
                    if (timeBtn) {
                        selectTime(userData.timeAvailability, timeBtn);
                    }
                }
            }, 500);

            // Show notification that data was loaded
            setTimeout(() => {
                alert(`‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ`);
            }, 800);
        }

        // Initialize Supabase
        function initializeSupabase() {
            try {
                // Replace with your actual Supabase URL and anon key
                const SUPABASE_URL = 'https://lvtdqeerzxpznnayccmb.supabase.co';
                const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2dGRxZWVyenhwem5uYXljY21iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0MTAxMjksImV4cCI6MjA2ODk4NjEyOX0.Uai-3_YSJpsYmSSTbHtrSNBoCG5f8WxoUcqyvcV3yUM';
                
                supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log("Supabase initialized successfully");
            } catch (error) {
                console.error("Supabase initialization failed:", error);
            }
        }

        // Save data to Supabase
        async function saveToSupabase(calculationData) {
            if (!supabaseClient) {
                console.error("Supabase client not initialized - Please set your Supabase URL and API key");
                return false;
            }

            try {
                console.log("Attempting to save data:", calculationData);
                
                let result;
                
                if (existingRecordId) {
                    // Update existing record
                    console.log("Updating existing record with ID:", existingRecordId);
                    
                    // Remove created_at from update data since it shouldn't be updated
                    const updateData = { ...calculationData };
                    delete updateData.created_at;
                    // Don't add updated_at since the column doesn't exist in the table
                    
                    result = await supabaseClient
                        .from('tdee_form')
                        .update(updateData)
                        .eq('id', existingRecordId);
                } else {
                    // Insert new record
                    console.log("Inserting new record");
                    result = await supabaseClient
                        .from('tdee_form')
                        .insert([calculationData]);
                }

                const { data, error } = result;

                if (error) {
                    console.error("Error saving to Supabase:", error);
                    console.error("Error details:", error.message);
                    
                    // Show user-friendly error message
                    if (error.message.includes('relation "tdee_form" does not exist')) {
                        console.error("Table 'tdee_form' not found. Please create the table first.");
                        alert("‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö");
                    } else {
                        alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`);
                    }
                    return false;
                }

                console.log("Data saved successfully to tdee_form table:", data);
                return true;
            } catch (error) {
                console.error("Error saving to Supabase:", error);
                alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å: ${error.message}`);
                return false;
            }
        }

        // Gender selection
        function selectGender(gender) {
            userData.gender = gender;
            document.querySelectorAll('.gender-btn').forEach(btn => {
                btn.classList.remove('border-brown-400', 'bg-brown-50');
                btn.classList.add('border-brown-200');
            });
            document.querySelector(`[data-gender="${gender}"]`).classList.add('border-brown-400', 'bg-brown-50');
            document.querySelector(`[data-gender="${gender}"]`).classList.remove('border-brown-200');
        }

        // Activity selection
        function selectActivity(activity, element) {
            userData.activity = activity;
            document.querySelectorAll('.activity-btn').forEach(btn => {
                btn.classList.remove('border-brown-400', 'bg-brown-50');
                btn.classList.add('border-brown-200');
            });
            element.classList.add('border-brown-400', 'bg-brown-50');
            element.classList.remove('border-brown-200');
        }

        // Goal selection
        function selectGoal(goal, element) {
            userData.goal = goal;
            document.querySelectorAll('.goal-btn').forEach(btn => {
                btn.classList.remove('border-brown-400', 'bg-brown-50');
                btn.classList.add('border-brown-200');
            });
            element.classList.add('border-brown-400', 'bg-brown-50');
            element.classList.remove('border-brown-200');
        }

        // Allergy selection
        function toggleAllergy(allergy) {
            if (allergy === 'none') {
                // If "none" is selected, clear all other allergies
                userData.allergies = ['none'];
                document.querySelectorAll('.allergy-checkbox').forEach(checkbox => {
                    checkbox.checked = checkbox.value === 'none';
                });
            } else {
                // Remove "none" if other allergies are selected
                const noneIndex = userData.allergies.indexOf('none');
                if (noneIndex > -1) {
                    userData.allergies.splice(noneIndex, 1);
                    document.querySelector('.allergy-checkbox[value="none"]').checked = false;
                }
                
                // Toggle the selected allergy
                const index = userData.allergies.indexOf(allergy);
                if (index > -1) {
                    userData.allergies.splice(index, 1);
                } else {
                    userData.allergies.push(allergy);
                }
            }
        }

        // Condition selection
        function toggleCondition(condition) {
            if (condition === 'none') {
                // If "none" is selected, clear all other conditions
                userData.conditions = ['none'];
                document.querySelectorAll('.condition-checkbox').forEach(checkbox => {
                    checkbox.checked = checkbox.value === 'none';
                });
            } else {
                // Remove "none" if other conditions are selected
                const noneIndex = userData.conditions.indexOf('none');
                if (noneIndex > -1) {
                    userData.conditions.splice(noneIndex, 1);
                    document.querySelector('.condition-checkbox[value="none"]').checked = false;
                }
                
                // Toggle the selected condition
                const index = userData.conditions.indexOf(condition);
                if (index > -1) {
                    userData.conditions.splice(index, 1);
                } else {
                    userData.conditions.push(condition);
                }
            }
        }

        // Diet preference selection
        function toggleDiet(diet) {
            const index = userData.dietPreferences.indexOf(diet);
            if (index > -1) {
                userData.dietPreferences.splice(index, 1);
            } else {
                userData.dietPreferences.push(diet);
            }
        }

        // Time availability selection
        function selectTime(time, element) {
            userData.timeAvailability = time;
            document.querySelectorAll('.time-btn').forEach(btn => {
                btn.classList.remove('border-brown-400', 'bg-brown-50');
                btn.classList.add('border-brown-200');
            });
            element.classList.add('border-brown-400', 'bg-brown-50');
            element.classList.remove('border-brown-200');
        }

        // Workout preference selection
        function toggleWorkout(workout) {
            const index = userData.workoutPreferences.indexOf(workout);
            if (index > -1) {
                userData.workoutPreferences.splice(index, 1);
            } else {
                userData.workoutPreferences.push(workout);
            }
        }

        // Helper functions to get selected data
        function getSelectedAllergies() {
            return userData.allergies.length > 0 ? userData.allergies : ['none'];
        }

        function getSelectedConditions() {
            return userData.conditions.length > 0 ? userData.conditions : ['none'];
        }

        function getActivityLevelText(activityValue) {
            const activityMap = {
                1.2: '‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢',
                1.375: '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏ö‡∏≤‡πÜ',
                1.55: '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                1.725: '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å',
                1.9: '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å'
            };
            return activityMap[activityValue] || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
        }

        function getGoalText(goalValue) {
            const goalMap = {
                'lose': '‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å',
                'maintain': '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å',
                'gain': '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å',
                'muscle': '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠'
            };
            return goalMap[goalValue] || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
        }

        // Navigation functions
        function nextPage(page) {
            if (page === 1) {
                // Validate basic information
                const fullName = document.getElementById('full-name').value.trim();
                const age = parseInt(document.getElementById('age').value);
                const height = parseInt(document.getElementById('height').value);
                const weight = parseFloat(document.getElementById('weight').value);
                const targetWeight = parseFloat(document.getElementById('target-weight').value);
                const timeline = parseInt(document.getElementById('timeline').value);
                
                if (!fullName) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•');
                    return;
                }
                if (!userData.gender) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®');
                    return;
                }
                if (!age || age < 1 || age > 120) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (1-120 ‡∏õ‡∏µ)');
                    return;
                }
                if (!height || height < 100 || height > 250) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (100-250 ‡∏ã‡∏°.)');
                    return;
                }
                if (!weight || weight < 30 || weight > 300) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (30-300 ‡∏Å‡∏Å.)');
                    return;
                }
                if (!targetWeight || targetWeight < 30 || targetWeight > 300) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (30-300 ‡∏Å‡∏Å.)');
                    return;
                }
                if (!timeline || timeline < 1 || timeline > 24) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (1-24 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)');
                    return;
                }
                
                userData.fullName = fullName;
                userData.age = age;
                userData.height = height;
                userData.weight = weight;
                userData.targetWeight = targetWeight;
                userData.timeline = timeline;
                
                showPage(2);
            } else if (page === 2) {
                if (!userData.activity) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°');
                    return;
                }
                showPage(3);
            } else if (page === 3) {
                if (!userData.goal) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢');
                    return;
                }
                showPage(4);
            } else if (page === 4) {
                // Save other allergies data
                userData.otherAllergies = document.getElementById('other-allergies').value.trim();
                showPage(5);
            } else if (page === 5) {
                // Save other conditions data
                userData.otherConditions = document.getElementById('other-conditions').value.trim();
                showPage(6);
            } else if (page === 6) {
                showPage(7);
            } else if (page === 7) {
                if (!userData.timeAvailability) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á');
                    return;
                }
                showPage(8);
            }
        }

        function prevPage(page) {
            showPage(page - 1);
        }

        function showPage(pageNum) {
            // Hide all pages
            document.querySelectorAll('[id^="page"], #results').forEach(page => {
                page.classList.add('hidden');
                page.classList.remove('fade-in');
            });
            
            // Show target page
            const targetPage = document.getElementById(`page${pageNum}`);
            if (targetPage) {
                targetPage.classList.remove('hidden');
                targetPage.classList.add('fade-in');
                currentPage = pageNum;
                updateProgress();
            }
        }

        function updateProgress() {
            const progressTexts = {
                1: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô',
                2: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°', 
                3: '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢',
                4: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
                5: '‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß',
                6: '‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
                7: '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á',
                8: '‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢'
            };
            
            const progressPercent = (currentPage / 8) * 100;
            
            document.getElementById('progress-text').textContent = progressTexts[currentPage];
            document.getElementById('progress-count').textContent = `${currentPage}/8`;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;
        }

        // TDEE Calculation
        async function calculateTDEE() {
            if (!userData.goal) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢');
                return;
            }

            // Calculate BMR using Mifflin-St Jeor Equation
            let bmr;
            if (userData.gender === 'male') {
                bmr = (10 * userData.weight) + (6.25 * userData.height) - (5 * userData.age) + 5;
            } else {
                bmr = (10 * userData.weight) + (6.25 * userData.height) - (5 * userData.age) - 161;
            }

            // Calculate TDEE
            const tdee = bmr * userData.activity;

            // Calculate goal calories
            let goalCalories = tdee;
            let goalTitle = '';
            let goalDescription = '';

            switch (userData.goal) {
                case 'lose':
                    goalCalories = tdee - 500;
                    goalTitle = '‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å';
                    goalDescription = '‡∏•‡∏î‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 500 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 0.5 ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå';
                    break;
                case 'maintain':
                    goalCalories = tdee;
                    goalTitle = '‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å';
                    goalDescription = '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô';
                    break;
                case 'gain':
                    goalCalories = tdee + 500;
                    goalTitle = '‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å';
                    goalDescription = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 500 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 0.5 ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå';
                    break;
                case 'muscle':
                    goalCalories = tdee + 350;
                    goalTitle = '‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠';
                    goalDescription = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà 350 ‡πÅ‡∏Ñ‡∏•/‡∏ß‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô 1.6-2.2 ‡∏Å‡∏£‡∏±‡∏°/‡∏Å‡∏Å.‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å';
                    break;
            }

            // Calculate BMI
            const heightInMeters = userData.height / 100;
            const bmi = userData.weight / (heightInMeters * heightInMeters);
            
            let bmiStatus = '';
            if (bmi < 18.5) {
                bmiStatus = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ô‡πâ‡∏≠‡∏¢';
            } else if (bmi < 25) {
                bmiStatus = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏Å‡∏ï‡∏¥';
            } else if (bmi < 30) {
                bmiStatus = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô';
            } else {
                bmiStatus = '‡∏≠‡πâ‡∏ß‡∏ô';
            }

            // Calculate weight difference and weekly rate
            const weightDifference = userData.targetWeight - userData.weight;
            const weeklyWeightChange = weightDifference / (userData.timeline * 4.33); // 4.33 weeks per month
            
            // Determine if goal is realistic
            let timelineDescription = '';
            let weightGoalDescription = '';
            
            if (Math.abs(weightDifference) < 0.5) {
                weightGoalDescription = '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô';
                timelineDescription = '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å';
            } else if (weightDifference > 0) {
                weightGoalDescription = `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ${Math.abs(weightDifference).toFixed(1)} ‡∏Å‡∏Å.`;
                if (weeklyWeightChange > 0.5) {
                    timelineDescription = '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤';
                } else {
                    timelineDescription = `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${Math.abs(weeklyWeightChange).toFixed(2)} ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå`;
                }
            } else {
                weightGoalDescription = `‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ${Math.abs(weightDifference).toFixed(1)} ‡∏Å‡∏Å.`;
                if (Math.abs(weeklyWeightChange) > 1) {
                    timelineDescription = '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤';
                } else {
                    timelineDescription = `‡∏•‡∏î‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${Math.abs(weeklyWeightChange).toFixed(2)} ‡∏Å‡∏Å./‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå`;
                }
            }

            // Prepare data for Supabase
            const calculationData = {
                line_user_id: lineUserId || null,
                full_name: userData.fullName || null, // Use form input, fallback to LINE profile
                age: userData.age,
                gender: userData.gender,
                weight: userData.weight,
                height: userData.height,
                target_weight: userData.targetWeight,
                timeline_months: userData.timeline,
                activity_level: getActivityLevelText(userData.activity),
                goal: getGoalText(userData.goal),
                allergies: getSelectedAllergies(),
                medical_conditions: getSelectedConditions(),
                diet_preferences: userData.dietPreferences.length > 0 ? userData.dietPreferences : null,
                time_availability: userData.timeAvailability || null,
                workout_preferences: userData.workoutPreferences.length > 0 ? userData.workoutPreferences : null,
                other_allergies: userData.otherAllergies || null,
                other_conditions: userData.otherConditions || null,
                bmr: Math.round(bmr),
                tdee: Math.round(tdee),
                goal_calories: Math.round(goalCalories),
                bmi: parseFloat(bmi.toFixed(1)),
                bmi_status: bmiStatus,
                weight_difference: parseFloat(weightDifference.toFixed(1)),
                weekly_weight_change: parseFloat(weeklyWeightChange.toFixed(2)),
                created_at: new Date().toISOString()
            };

            // Get full name from LINE profile if form name is empty
            try {
                if (liff && liff.isLoggedIn() && !userData.fullName) {
                    const profile = await liff.getProfile();
                    calculationData.full_name = profile.displayName || null;
                }
            } catch (error) {
                console.log("Could not get LINE profile:", error);
            }

            // Save to Supabase
            const saveSuccess = await saveToSupabase(calculationData);
            if (saveSuccess) {
                console.log("Data saved to Supabase successfully");
                // Show success notification based on whether it's update or new record
                setTimeout(() => {
                    if (existingRecordId) {
                        alert(`‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• TDEE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß\n‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠`);
                    } else {
                        alert(`‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• TDEE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß\n‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠`);
                    }
                }, 1000);
            } else {
                console.log("Failed to save data to Supabase");
                // Show error notification
                setTimeout(() => {
                    alert(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö`);
                }, 1000);
            }

            // Display results
            document.getElementById('bmr-result').textContent = Math.round(bmr).toLocaleString();
            document.getElementById('tdee-result').textContent = Math.round(tdee).toLocaleString();
            document.getElementById('goal-calories').textContent = Math.round(goalCalories).toLocaleString();
            document.getElementById('goal-title').textContent = goalTitle;
            document.getElementById('goal-description').textContent = goalDescription;
            document.getElementById('bmi-result').textContent = bmi.toFixed(1);
            document.getElementById('bmi-status').textContent = bmiStatus;
            document.getElementById('target-weight-result').textContent = userData.targetWeight.toFixed(1);
            document.getElementById('weight-goal-description').textContent = weightGoalDescription;
            document.getElementById('timeline-result').textContent = userData.timeline;
            document.getElementById('timeline-description').textContent = timelineDescription;

            // Show results page
            document.querySelectorAll('[id^="page"]').forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').classList.add('fade-in');
            
            // Update progress bar to show completion
            document.getElementById('progress-text').textContent = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô';
            document.getElementById('progress-count').textContent = '8/8';
            document.getElementById('progress-bar').style.width = '100%';
        }

        function resetCalculator() {
            userData = {
                fullName: '',
                gender: '',
                age: 0,
                height: 0,
                weight: 0,
                targetWeight: 0,
                timeline: 0,
                activity: 0,
                goal: '',
                allergies: [],
                conditions: [],
                dietPreferences: [],
                timeAvailability: '',
                workoutPreferences: [],
                otherAllergies: '',
                otherConditions: ''
            };
            
            // Reset existing record ID so next save will be a new record
            existingRecordId = null;
            
            // Reset form inputs
            document.getElementById('full-name').value = '';
            document.getElementById('age').value = '';
            document.getElementById('height').value = '';
            document.getElementById('weight').value = '';
            document.getElementById('target-weight').value = '';
            document.getElementById('timeline').value = '';
            
            // Reset button selections
            document.querySelectorAll('.gender-btn, .activity-btn, .goal-btn, .time-btn').forEach(btn => {
                btn.classList.remove('border-brown-400', 'bg-brown-50');
                btn.classList.add('border-brown-200');
            });
            
            // Reset checkboxes
            document.querySelectorAll('.allergy-checkbox, .condition-checkbox, .diet-checkbox, .workout-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // Reset other text areas
            document.getElementById('other-allergies').value = '';
            document.getElementById('other-conditions').value = '';
            
            // Go back to first page
            showPage(1);
        }

        function shareResults() {
            const bmr = document.getElementById('bmr-result').textContent;
            const tdee = document.getElementById('tdee-result').textContent;
            const goalCalories = document.getElementById('goal-calories').textContent;
            const bmi = document.getElementById('bmi-result').textContent;
            const bmiStatus = document.getElementById('bmi-status').textContent;
            
            const shareText = `üî• ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì TDEE ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô\n\n` +
                            `üìä BMR: ${bmr} ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô\n` +
                            `‚ö° TDEE: ${tdee} ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô\n` +
                            `üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${goalCalories} ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà/‡∏ß‡∏±‡∏ô\n` +
                            `üìè BMI: ${bmi} (${bmiStatus})\n\n` +
                            `‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì TDEE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà!`;
            
            if (navigator.share) {
                navigator.share({
                    title: '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì TDEE',
                    text: shareText
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß!');
                }).catch(() => {
                    // If clipboard API fails, show the text in an alert
                    alert(shareText);
                });
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', async function() {
            updateProgress();
            
            // Initialize Supabase
            initializeSupabase();
            
            // Initialize LIFF
            await initializeLIFF();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99ded0ebc42d2731',t:'MTc2MzA0MjY0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
